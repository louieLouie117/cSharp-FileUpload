@using FileUpload.Models
@model Apprentice

<div class="apprentice-Container">

<head>
    <style>
      #video {
        display: none;
      }

       #loading {
        display: none;
      }
    </style>
</head>
    @* <header>

        <h2>CrateApprentice</h2>
        <form asp-action="CrateApprentice" asp-controller="Home" method="Post" enctype="multipart/form-data">

            <input asp-for="name" placeholder="name">
            <input asp-for="UploadName" placeholder="name" style="display: none;">
       
            <input asp-for="files" type="file" multiple>

            <input type="submit" value="Submit!">
        </form>

    </header> *@


    @* working code bellow *@
     @* <header class="hidden">
        
        <h2> UploadFile WebHost</h2>
        <form asp-action="ServerFileUploader" asp-controller="Home" method="Post" enctype="multipart/form-data">

            <input asp-for="name" placeholder="name">
            <input asp-for="UploadName" placeholder="name" style="display: none;">
            <input asp-for="files" type="file" multiple>

            <input type="submit" value="Submit!">
        </form>

    </header> *@


         <header>

        <h2>file Uploader</h2>
        <form asp-action="FileUploader" asp-controller="Home" method="Post" enctype="multipart/form-data">

            <input asp-for="name" placeholder="name">
            <input asp-for="UploadName" placeholder="name" style="display: none;">
       
            <input asp-for="files" type="file" multiple>

            <input type="submit" value="Submit!">
        </form>

    </header>

    <main>
     <h1>Take a Photo</h1>
     <p id="loading">Loading...</p>
    <video id="video" width="640" height="480"></video>
    <button id="start">Start Camera</button>
    <button id="snapAndStop">Snap Photo and Stop Camera</button>
    <canvas id="canvas" width="640" height="480"></canvas>

    <script>
      // Elements for taking the snapshot
      var loading = document.getElementById('loading');
      var video = document.getElementById('video');
      var canvas = document.getElementById('canvas');
      var context = canvas.getContext('2d');
      var start = document.getElementById('start');
      var snapAndStop = document.getElementById('snapAndStop');

      // Start camera
      start.addEventListener('click', function () {
        loading.style.display = 'block';
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
          navigator.mediaDevices.getUserMedia({ video: true }).then(function (stream) {
            loading.style.display = 'none';
            video.style.display = 'block';
            video.srcObject = stream;
            video.play();

            // Snap photo and stop camera
            snapAndStop.addEventListener('click', function () {
              context.drawImage(video, 0, 0, 640, 480);
              stream.getTracks().forEach(function (track) {
                track.stop();
              });
              video.style.display = 'none';
            });
          });
        }
      });
    </script>

    </main>
   
</div>
